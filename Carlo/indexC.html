<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planting App</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="sky">
    <img src="Carlo/garden/sun.png" id="sun" alt="Sun">
    <!-- 5 cloud copies -->
    <div class="cloud" style="top: 10px; animation-delay: 0s;"><img src="Carlo/garden/clouds.png" alt="Cloud"></div>
    <div class="cloud" style="top: 30px; animation-delay: 3s;"><img src="Carlo/garden/clouds.png" alt="Cloud"></div>
    <div class="cloud" style="top: 50px; animation-delay: 6s;"><img src="Carlo/garden/clouds.png" alt="Cloud"></div>
    <div class="cloud" style="top: 70px; animation-delay: 9s;"><img src="Carlo/garden/clouds.png" alt="Cloud"></div>
    <div class="cloud" style="top: 90px; animation-delay: 12s;"><img src="Carlo/garden/clouds.png" alt="Cloud"></div>
  </div>

  <div id="controls">
    <div>
      <h3>Seeds</h3>
      <img src="Carlo/garden/sunflowerseed.png" alt="Sunflower" draggable="true" ondragstart="drag(event)" data-type="sunflower">
      <img src="Carlo/garden/rosesseed.png" alt="Roses" draggable="true" ondragstart="drag(event)" data-type="roses">
      <img src="Carlo/garden/irisseed.png" alt="Iris" draggable="true" ondragstart="drag(event)" data-type="iris">
      <img src="Carlo/garden/lilyseed.png" alt="Lily" draggable="true" ondragstart="drag(event)" data-type="lily">
    </div>
    <div>
      <h3>Actions</h3>
      <img src="Carlo/garden/water.png" alt="Water" draggable="true" ondragstart="drag(event)" data-action="water">
      <img src="Carlo/garden/fertilizer.png" alt="Fertilizer" draggable="true" ondragstart="drag(event)" data-action="fertilizer">
      <img src="Carlo/garden/shovel.png" alt="Shovel" draggable="true" ondragstart="drag(event)" data-action="shovel">
    </div>
  </div>

  <div id="grid"></div>

  <script src="app.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: url('Carlo/garden/background.png') no-repeat center center fixed;
      background-size: cover;
    }

    #sky {
      position: relative;
      height: 150px;
      overflow: hidden;
    }

    #sun {
      position: absolute;
      top: 20px;
      left: 0;
      width: 80px;
      animation: moveSun 60s linear infinite;
    }

    .cloud {
      position: absolute;
      left: 100%;
      width: 200px;
      animation: moveClouds 30s linear infinite;
    }

    .cloud img {
      width: 100%;
    }

    @keyframes moveSun {
      0% { left: 0; }
      100% { left: 100%; }
    }

    @keyframes moveClouds {
      0% { left: 100%; }
      100% { left: -200px; }
    }

    #controls {
      display: flex;
      justify-content: space-around;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
    }

    #controls img {
      width: 40px;
      height: 40px;
      margin: 0 5px;
      cursor: grab;
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
      gap: 5px;
      padding: 10px;
      max-width: 400px;
      margin: auto;
    }

    .cell {
      width: 80px;
      height: 80px;
      background-image: url('Carlo/garden/soilgrid.png');
      background-size: cover;
      position: relative;
    }

    .plant-img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      position: absolute;
      top: 0;
      left: 0;
    }

    .timer-label {
      position: absolute;
      bottom: 0;
      left: 0;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      font-size: 10px;
      width: 100%;
      text-align: center;
    }
  </style>
  <script>
    const seeds = {
      sunflower: { time: 5 * 60, img: 'Carlo/garden/sunflower.png' },
      roses: { time: 10 * 60, img: 'Carlo/garden/roses.png' },
      iris: { time: 30 * 60, img: 'Carlo/garden/iris.png' },
      lily: { time: 60 * 60, img: 'Carlo/garden/lily.png' }
    };

    const grid = document.getElementById('grid');

    for (let i = 0; i < 16; i++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');
      cell.dataset.index = i;
      cell.ondragover = (e) => e.preventDefault();
      cell.ondrop = (e) => handleDrop(e, cell);
      grid.appendChild(cell);
    }

    function drag(event) {
      event.dataTransfer.setData("type", event.target.dataset.type);
      event.dataTransfer.setData("action", event.target.dataset.action);
    }

    function handleDrop(e, cell) {
      const type = e.dataTransfer.getData("type");
      const action = e.dataTransfer.getData("action");

      if (type && !cell.dataset.planted) {
        const seed = seeds[type];
        cell.dataset.planted = 'true';
        cell.dataset.seedType = seed.img;
        cell.dataset.time = seed.time;
        const img = document.createElement('img');
        img.src = seed.img;
        img.classList.add('plant-img');
        cell.appendChild(img);
      } else if (action === 'water' && cell.dataset.planted && !cell.dataset.timerStarted) {
        let time = parseInt(cell.dataset.time);
        if (cell.dataset.fertilized) time /= 2;
        cell.dataset.timerStarted = 'true';

        const timer = document.createElement('div');
        timer.classList.add('timer-label');
        cell.appendChild(timer);

        const interval = setInterval(() => {
          if (time > 0) {
            let minutes = Math.floor(time / 60);
            let seconds = time % 60;
            timer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            time--;
          } else {
            clearInterval(interval);
            timer.textContent = 'Bloomed!';
            alert('Your plant is fully grown!');
          }
        }, 1000);
      } else if (action === 'fertilizer' && cell.dataset.planted && !cell.dataset.fertilized) {
        cell.dataset.fertilized = 'true';
        alert('Fertilizer added!');
      } else if (action === 'shovel' && cell.dataset.planted) {
        cell.dataset = {};
        cell.innerHTML = '';
      }
    }
  </script>
</body>

</html>